<!DOCTYPE html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Coding Tutorials</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="tutorial-nav">
      <button class="nav-btn active" data-tutorial="Micro-ROS">
        Micro-ROS
      </button>
      <button class="nav-btn" data-tutorial="Create cmd_vel node">
        Create cmd_vel node
      </button>
      <button class="nav-btn" data-tutorial="Create a ROS package">Create a ROS package</button>
    </div>
    <div class="container">
      <button id="theme-toggle" class="theme-toggle">Toggle Dark Mode</button>
      <h1>Walter tutorials</h1>

      <div id="Micro-ROS" class="tutorial-content active">
        <div class="tutorial-section">
          <h3>Step 1: Installer micro-ROS</h3>

          <p>Installation des pr√©requis:</p>
          <pre>
<code>sudo apt install software-properties-common
sudo add-apt-repository universe</code><button class="copy-btn">Copy</button></pre>

          <pre>
<code>sudo apt update && sudo apt install curl -y
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg</code><button class="copy-btn">Copy</button></pre>

          <pre>
<code>echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu $(. /etc/os-release && echo $UBUNTU_CODENAME) main" | sudo tee /etc/apt/sources.list.d/ros2.list > /dev/null</code><button class="copy-btn">Copy</button></pre>

          <pre>
<code>sudo apt update</code><button class="copy-btn">Copy</button></pre>

          <pre>
<code>mkdir -p ~/micro_ros_ws/src
cd ~/micro_ros_ws</code><button class="copy-btn">Copy</button></pre>

          <pre>
<code>git clone -b foxy https://github.com/micro-ROS/micro_ros_setup.git src/micro_ros_setup</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 2: Installation des dependencies</h3>

          <p>ROS2 dependencies</p>
          <pre>
<code>sudo apt install python3-colcon-common-extensions python3-vcstool</code><button class="copy-btn">Copy</button></pre>

          <p>Rosdep</p>
          <pre>
<code>rosdep init
rosdep update
rosdep install --from-paths src --ignore-src -y</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 3: Setup micro-ROS</h3>

          <p>Build ROS2</p>
          <pre>
<code>colcon build
source install/local_setup.bash</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 4: Installation firmware & Agent</h3>

          <p>Firmware</p>
          <pre>
<code>ros2 run micro_ros_setup create_firmware_ws.sh host
source install/local_setup.bash</code><button class="copy-btn">Copy</button></pre>

          <p>Agent</p>
          <pre>
<code>ros2 run micro_ros_setup create_agent_ws.sh
ros2 run micro_ros_setup build_agent.sh
source install/local_setup.bash</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 5: Run</h3>

          <p>Default baud rate is 115200</p>
          <pre>
<code>ros2 run micro_ros_agent micro_ros_agent serial --dev /dev/ttyACM0</code><button class="copy-btn">Copy</button></pre>

          <h3>In case of error :</h3>

          <p>Check if ACM0 is busy</p>
          <pre>
<code>lsof | grep ttyACM0</code><button class="copy-btn">Copy</button></pre>

          <p>Kill corresponding process</p>
          <pre>
<code>kill "process number"</code><button class="copy-btn">Copy</button></pre>
        </div>
      </div>

      <div id="Create cmd_vel node" class="tutorial-content">
        <div class="tutorial-section">
          <h3>Step 1: Create the Package</h3>
          <p>
            To create a new ROS2 package for your robot, use the following
            command:
          </p>
          <pre><code>cd ~/ros2_ws/src
ros2 pkg create --build-type ament_cmake walter_robot --dependencies rclcpp std_msgs</code><button class="copy-btn">Copy</button></pre>
          <p>This command will:</p>
          <ul>
            <li>
              Create a directory named <code>walter_robot</code> inside
              <code>~/ros2_ws/src</code>.
            </li>
            <li>
              Add basic files for building the package (e.g.,
              <code>CMakeLists.txt</code>, <code>package.xml</code>).
            </li>
            <li>
              Set the <code>rclcpp</code> and <code>std_msgs</code> dependencies
              in the <code>package.xml</code> file.
            </li>
          </ul>

          <h3>Step 2: Add a Node in Python</h3>
          <p>Create a script to publish velocity commands:</p>
          <pre><code>mkdir scripts
touch scripts/cmd_vel_publisher.py</code><button class="copy-btn">Copy</button></pre>

          <p>
            Edit <code>cmd_vel_publisher.py</code> to include this Python node:
          </p>
          <pre><code>#!/usr/bin/env python3
import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist

class CmdVelPublisher(Node):
    def __init__(self):
        super().__init__('cmd_vel_publisher')
        self.publisher = self.create_publisher(Twist, 'cmd_vel', 10)
        self.timer = self.create_timer(1.0, self.publish_velocity)
        self.get_logger().info("CmdVelPublisher node has been started.")

    def publish_velocity(self):
        msg = Twist()
        msg.linear.x = 0.5  # Move forward with linear velocity
        msg.angular.z = 0.1  # Rotate slightly
        self.publisher.publish(msg)
        self.get_logger().info(f'Publishing: linear.x="{msg.linear.x}", angular.z="{msg.angular.z}"')

def main(args=None):
    rclpy.init(args=args)
    node = CmdVelPublisher()
    rclpy.spin(node)
    node.destroy_node()
    rclpy.shutdown()

if __name__ == '__main__':
    main()</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 3: Make the Script Executable</h3>
          <p>Before you can run this script, make it executable:</p>
          <pre><code>chmod +x scripts/cmd_vel_publisher.py</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 4: Update CMakeLists.txt</h3>
          <p>
            In the <code>CMakeLists.txt</code>, add the following lines to
            install the Python script:
          </p>
          <pre><code>find_package(ament_cmake_python REQUIRED)
    
install(PROGRAMS
  scripts/cmd_vel_publisher.py
  DESTINATION lib/${PROJECT_NAME}
)</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 5: Build and Source the Package</h3>
          <p>Now, build the package:</p>
          <pre><code>cd ~/ros2_ws
colcon build --packages-select walter_robot</code><button class="copy-btn">Copy</button></pre>

          <p>After building, source the workspace:</p>
          <pre><code>source install/setup.bash</code><button class="copy-btn">Copy</button></pre>

          <h3>Step 6: Run the Node</h3>
          <p>Finally, run the node:</p>
          <pre><code>ros2 run walter_robot cmd_vel_publisher.py</code><button class="copy-btn">Copy</button></pre>
        </div>
      </div>

      <div id="Create a ROS package" class="tutorial-content">
        <div class="tutorial-section">
            <h3>Step 1: Create the Package</h3>
            <p>To create a new ROS2 package, use the following command:</p>
            <pre><code>cd ~/ros2_ws/src
ros2 pkg create --build-type ament_cmake walter_robot --dependencies rclcpp std_msgs</code><button class="copy-btn">Copy</button></pre>
    
            <p>This command will:</p>
            <ul>
                <li>Create a directory named <code>walter_robot</code> inside <code>~/ros2_ws/src</code>.</li>
                <li>Add basic files for building the package, such as <code>CMakeLists.txt</code> and <code>package.xml</code>.</li>
                <li>Set the <code>rclcpp</code> and <code>std_msgs</code> dependencies in the <code>package.xml</code> file.</li>
            </ul>
    
            <p>After running the command, the package will be ready to add nodes, scripts, and other configurations. Make sure you navigate into the new <code>walter_robot</code> directory to begin customizing your package.</p>
    
            <h3>Step 2: Explore and Customize</h3>
            <p>Once the package is created, you can explore its structure and begin editing the <code>CMakeLists.txt</code> and <code>package.xml</code> files to add your own nodes or scripts.</p>
    
            <p>You're now ready to proceed with adding nodes and further developing the <code>walter_robot</code> package!</p>
        </div>
    </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
